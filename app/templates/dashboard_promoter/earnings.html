{% extends "dashboard_promoter/base.html" %}
{% block promoter_content %}

<h3 class="mb-4">ğŸ’° Ø£Ø±Ø¨Ø§Ø­ÙŠ</h3>

<ul class="nav nav-tabs mb-3">
  <li class="nav-item"><a class="nav-link active"
       data-bs-toggle="tab" href="#potential">ğŸ“Š Ø£Ø±Ø¨Ø§Ø­ Ù…Ø­ØªÙ…Ù„Ø© ({{ potential|length }})</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab"
       href="#confirmed">âœ… Ø£Ø±Ø¨Ø§Ø­ Ù…Ø¤ÙƒØ¯Ø© ({{ confirmed|length }})</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab"
       href="#converted">ğŸ’¸ ØªÙ… / Ù‚ÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ({{ converted|length }})</a></li>
</ul>

<div class="tab-content">

  {# 1) Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© #}
  <div class="tab-pane fade show active" id="potential">
    <table class="table table-hover align-middle">
      <thead class="table-light"><tr><th>Ø§Ù„Ø³Ù†Ø¯</th><th>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</th><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©</th></tr></thead>
      <tbody>
        {% for e,v,o in potential %}
        <tr><td>#{{ v.code }}</td>
            <td>{{ "%.2f"|format(e.promoter_amount) }} Ø±ÙŠØ§Ù„</td>
            <td>{{ e.created_at.strftime("%Y-%m-%d %H:%M") }}</td></tr>
        {% else %}
        <tr><td colspan="3" class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø±Ø¨Ø§Ø­ Ù…Ø­ØªÙ…Ù„Ø©.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {# 2) Ø§Ù„Ù…Ø¤ÙƒØ¯Ø© ØºÙŠØ± Ø§Ù„Ù…Ø­ÙˆÙ‘Ù„Ø© #}
  <div class="tab-pane fade" id="confirmed">
    <table class="table table-hover align-middle">
      <thead class="table-light"><tr><th>Ø§Ù„Ø³Ù†Ø¯</th><th>Ø§Ù„Ø·Ù„Ø¨</th><th>Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©</th><th>Ø§Ù„ØªØ£ÙƒÙŠØ¯</th></tr></thead>
      <tbody>
        {% for ce,o,v in confirmed %}
        <tr><td>#{{ v.code }}</td>
            <td>#{{ o.id }}</td>
            <td>{{ "%.2f"|format(ce.amount) }} Ø±ÙŠØ§Ù„</td>
            <td>{{ ce.created_at.strftime("%Y-%m-%d %H:%M") }}</td></tr>
        {% else %}
        <tr><td colspan="4" class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø±Ø¨Ø§Ø­ Ù…Ø¤ÙƒØ¯Ø© Ø¨Ø¹Ø¯.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {# 3) Ø§Ù„Ù…Ø­ÙˆÙ‘Ù„Ø© Ø£Ùˆ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ #}
  <div class="tab-pane fade" id="converted">
    <table class="table table-hover align-middle">
      <thead class="table-light"><tr><th>Ø§Ù„Ø³Ù†Ø¯</th><th>Ø§Ù„Ø·Ù„Ø¨</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th></tr></thead>
      <tbody>
        {% for ce,o,v,p in converted %}
        <tr><td>#{{ v.code }}</td>
            <td>#{{ o.id }}</td>
            <td>{{ "%.2f"|format(ce.amount) }} Ø±ÙŠØ§Ù„</td>
            <td>{{ p.status_label() }}</td>
            <td>{{ ce.created_at.strftime("%Y-%m-%d %H:%M") }}</td></tr>
        {% else %}
        <tr><td colspan="5" class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø±Ø¨Ø§Ø­ Ù…Ø­ÙˆÙ‘Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
