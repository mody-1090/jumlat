{% extends "dashboard_admin/base.html" %}
{% block admin_content %}
<h2 class="mb-4">๐ณ ูุฑุงุฌุนุฉ ุฅุซุจุงุชุงุช ุงูุฏูุน</h2>

{% if vouchers %}
  <table class="table table-bordered table-hover">
    <thead class="table-light">
      <tr class="text-center">
        <th>ุงูุฑูุฒ</th>
        <th>ุงูููุชุฌ</th>
        <th>ุงููููุฉ</th>
        <th>ุงููุตูุน</th>
        <th>ุงุณู ุงูุญุณุงุจ ุงูุจููู ุงููุญููู ููู</th>
        <th>ุฑุงุจุท ุงูุฅุซุจุงุช (ุงุฎุชูุงุฑู)</th>
        <th>ุงูุฅุฌุฑุงุก</th>
      </tr>
    </thead>
    <tbody>
      {% for v in vouchers %}
      <tr class="text-center">
        <td>{{ v.code }}</td>
        <td>{{ v.product }}</td>
        <td>{{ v.quantity }}</td>
        <td>{{ v.factory.name }}</td>
        <td>
          {% if v.payment_account_name %}
            {{ v.payment_account_name }}
          {% else %}
            <span class="text-muted">ูู ูุชู ุงูุฅุฏุฎุงู</span>
          {% endif %}
        </td>
        <td>
          {% if v.payment_proof_url %}
            <a href="{{ v.payment_proof_url }}" target="_blank">ูุชุญ ุงูุฑุงุจุท</a>
          {% else %}
            <span class="text-muted">ุบูุฑ ูุชููุฑ</span>
          {% endif %}
        </td>
        <td>
          <!-- โ ุงุนุชูุงุฏ -->
          <form method="post" action="{{ url_for('admin.voucher_payment_review') }}" class="d-inline">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="hidden" name="voucher_id" value="{{ v.id }}">
            <input type="hidden" name="action" value="approve">
            <button class="btn btn-success btn-sm">โ ุงุนุชูุงุฏ</button>
          </form>

          <!-- โ ุฑูุถ -->
          <form method="post" action="{{ url_for('admin.voucher_payment_review') }}" class="d-inline">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <input type="hidden" name="voucher_id" value="{{ v.id }}">
            <input type="hidden" name="action" value="reject">
            <input type="text" name="note" placeholder="ุณุจุจ ุงูุฑูุถ" class="form-control form-control-sm mt-1" required>
            <button class="btn btn-danger btn-sm mt-1">โ ุฑูุถ</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <div class="alert alert-info">ูุง ุชูุฌุฏ ุฅุซุจุงุชุงุช ุฏูุน ุญุงููุงู ูููุฑุงุฌุนุฉ.</div>
{% endif %}
{% endblock %}
